Приложение написано в контексте компании, которая предоставляет своим клиентам различные услуги согласно определённому
тарифу. Приложение обрабатывает заказы, назначая для их выполнения "наиболее подходящих" сотрудников с учётом их текущей
загруженности.

Реализованная SAGA – оставление клиентом заказа на оказание ему услуги. Сначала заказ фиксируется в ***Order Service***,
затем под заказ подбирается исполнитель в ***Execution Service***, затем совершается оплата заказа в
***Payment Service***. Повествование реализовано как оркестрация, в роли оркестратора выступает ***Order Service***.

<h3>Order Service</h3>

Backend той команды компании, которая занимается сопровождением клиентских заказов. Задача этого сервиса – предоставить
клиентам интерфейс для заказа услуг и отслеживания статуса их выполнения. Является первоисточником информации о клиентах
и их заказах. Назначение таблиц:

- `queued_event` – Очередь исходящих сообщений о событиях сервиса. Гарантирует отправку сообщений в 1 транзакции с
  формирующей их бизнес-логикой.
- `processed_event` – Перечень успешно обработанных сервисом событий. Гарантирует идемпотентность обработки сообщений.
- `order` – Информация о заказе клиента. Поле `deadline_on` – крайняя дата, когда клиенту нужно отчитаться о выполненной
  услуге. Поле `cost` гарантирует неизменность данных о стоимости заказа для клиента, даже если в обход действующего
  правила о создании "новой услуги" при изменении её стоимости она каким-то образом окажется изменена.
- `client` – Первоисточник информации о клиентах в приложении.
- `offering` – "Кэш" информации о доступных услугах. `remote_id` – id услуги в рамках ***Execution Service*** –
  первоисточника информации о доступных услугах. `is_deprecated` – флажок, предотвращающий отображение услуги в условном
  селекторе формы для оформления заказа.
- `executor` – Исполнители клиентских заказов. `remote_id` – id услуги в рамках ***Execution Service*** – первоисточника
  информации об исполнителях заказов.

Исключения на этом этапе транзакции: нет указанного в параметрах запроса клиента или услуги.

Компенсация исключений на последующих этапах: смена статуса заказа.

<h3>Execution Service</h3>

Backend той команды компании, которая занимается сопровождением процесса выполнения текущих задач компании, в частности
клиентских заказов. Задача этого сервиса – предоставить исполнителям задач и их менеджерам необходимый для их работы
интерфейс. Является первоисточником информации о ходе выполнения задач и доступных услугах. Назначение таблиц:

- `execution` – Информация о ходе выполнения задачи. `order_id` – id заказа в рамках ***Order Service***, которому
  соответствует выполняемая задача.
- `offering` – Информация об услугах. `deprecated_at` – время, начиная с которого услуга признана более недоступной.
  `points` – эстимация количества усилий, необходимых на оказание услуги.
- `executor` – Информация об исполнителях задач. `final_date` – последний рабочий день сотрудника в случае увольнения.
- `executor_stats` – Те поля `executor`, изменение которых во время перестроения плана выполнения задач потенциально
  может привести к некорректному перестроению. Вынесены в отдельную таблицу, чтобы назначить им отдельный атрибут
  `version`, используемый в реализации механизма optimistic locking. `daily_points` – текущая эстимация количества
  работы, которую сотрудник способен выполнить за свой рабочий день. `active_executions_count` – количество тех задач,
  под которые нужно зарезервировать рабочее время сотрудника. Данное поле нужно исключительно в роли формального повода
  инкрементировать `version` для Hibernate.
- `execution_item` – "План выполнения" задач. Хранит расписание выполнения задач согласно правилу "в последний момент".
  Упрощает вычисление того, подходит ли (имеет ли шансы успеть в срок) рассматриваемый исполнитель для выполнения
  очередной задачи. Предполагается, что в отдельной таблице фиксируется прогресс сотрудника в выполнении и что записи из
  данной таблицы удаляются по мере выполнения задач, но данная функциональность откровенно выходит за рамки задания.
- `client` – Кэш информации о клиентах ***Order Service***.

Исключения на этом этапе транзакции:

- устарела информация об услуге в ***Order Service*** (формулировка услуги или стоимость в глазах клиента отличаются от
  фактических или услуга стала недоступна), тогда актуальная информация пересылается в ***Order Service***;
- нет свободных исполнителей заказа.

Компенсация исключений на последующих этапах: снятие брони с сотрудника, смена статуса.

<h3>Payment Service</h3>

Backend команды, взаимодействующей с платёжными системами. Назначение таблиц:

- `order_payment` – Информация об оплате заказов. `payment_id` – id платежа в рамках внешней платёжной системы, в
  частности для потенциального возврата средств.
- `client` – Кэш информации о клиентах.

Исключения на этом этапе транзакции: не прошёл платёж. Вероятность отказа конфигурируется через `docker-compose.yaml`.

<h3>Analytics Service</h3>

Реализует требование на "сервис, в котором будут регистрироваться статусы транзакий (он же будет выступать как инициатор
транзакции) с контроллером с поддержкой пэйджинга, фильтрацией по датам (дата начала и дата конца периода), по статусу
транзакции (выполнена, отменена) и т.д.". Агрегирует информацию, передаваемую ему остальными сервисами. Предоставляет
endpoints:

- `POST: http://localhost:8080/api/orders` – пробрасывает запрос на фиксацию заказа в ***Order Service***. Тело запроса
  имеет вид:

```
{
    "clientId": 1,
    "offeringId": 1,
    "deadlineOn": "2026-01-31"
}
```

- `GET: http://localhost:8080/api/orders` – Возвращает информацию о статусе транзакций на оставление заказа клиентом.
  Статус транзакции представляет собой совокупность статусов на уровне каждого из сервисов. Время принимается в формате
  `YYYY-MM-DDThh:mm:ss`. Параметры запроса:
    - `intervalStart` – Optional. Минимальное время начала обработки заказа включительно.
    - `intervalEnd` – Optional. Максимальное время начала обработки заказа включительно.
    - `orderStatus` – Optional. Статус в рамках ***Order Service***: `AWAITING_EXECUTOR` /`AWAITING_PAYMENT` /
      `REJECTED_OFFERING` / `REJECTED_EXECUTOR` / `REJECTED_PAYMENT` / `EXECUTING`.
    - `executionStatus` – Optional. Статус в рамках ***Execution Service***: `AWAITING_PAYMENT` / `REJECTED_PAYMENT` /
      `EXECUTING`.
    - `paymentStatus` – Optional. Статус в рамках ***Payment Service***: `COMMITED` / `REJECTED`.
    - `page` – Optional. Номер страницы, нумерация с 1.
    - `pageSize` – Mandatory. Количество заказов на странице.